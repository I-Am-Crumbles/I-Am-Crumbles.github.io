## **Hack The Box - Cap**

**Creator:** [InfoSecJack](https://app.hackthebox.com/users/52045)

**Difficulty:** Easy

**Link:** [Cap](https://app.hackthebox.com/machines/351)

---


<ins> **Introduction** </ins>

![infocard](/docs/assets/images/HTB/cap/cap01.png)

Cap is an easy level machine on Hack The Box. It's solved by downloading a *pcap* file that contains plaintext credentials from a misconfigured webserver. From there I was able to exploit the *capability permissions* of the *Python 3.8* binary. 

---


<ins> **Enumeration** </ins>

I start the machine off with an Nmap services scan.

`nmap -sV -oA services <target_ip>`

![nmap services](/docs/assets/images/HTB/cap/cap02.png)

There is some useful information here. I can see that there is an ftp file server, the system allows for remote login over ssh, and a webserver. 

```
21/tcp open to ftp using vsftpd 3.0.3 
22/tcp open to ssh using OpenSSH 8.2p1 
80/tcp open http gunicorn 
```

I also recieved a message at the end of the scan about an unrecognized service and a token to submit for it.  At the end I can see that the Operating System is Linux. 

![nmap services2](/docs/assets/images/HTB/cap/cap03.png)

Searchsploit returned a Denial of service attack for the ftp server but that's not really what I'm going for here. Nothing showed up for the version of OpenSSH or at all for gunicorn. 

![searchsploit1](/docs/assets/images/HTB/cap/cap04.png)

![searchsploit2](/docs/assets/images/HTB/cap/cap05.png)

I'd never heard of *Gunicorn* before. According to [their website](https://gunicorn.org/) "Gunicorn 'Green Unicorn' is a Python WSGI HTTP Server for UNIX".

![gunicorn](/docs/assets/images/HTB/cap/cap06.png)

Running *whatweb* on the target web server I was able to find some additional information. It's also running *JQuery 2.24*, and *Modernizr 2.8.3.min*. The tile of the webpage is also shown as *"Security Dashboard"*. 

![whatweb](/docs/assets/images/HTB/cap/cap07.png)

This is my first run in with *modernizr* too. Taken from [their website](modernizr.com). Modernizr is a collection of superfast tests which run as the web page loads, then the results are used to tailor the user experience. 

![Modernizr](/docs/assets/images/HTB/cap/cap08.png)

Neither Modernizr or this systems version of JQuery returned anything on searchsploit. Still it's good to look into these things just to be sure.

---


<ins> **Enumerating the Web Server** </ins>

 Whenever a machine is hosting a webserver I try to check that out first. Navigating to the home page I'm greeted with a lot of stuff that doesn't work, which is pretty much everything on the home page. The search function does do something based on the response in the url, but as far as the webpage goes it just refreshes the dashboard. 
 
![Homepage](/docs/assets/images/HTB/cap/cap09.png) 

![Url Bar](/docs/assets/images/HTB/cap/cap10.png)


